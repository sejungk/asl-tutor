import React from 'react';
import { useLocation, Link } from 'react-router-dom';
import './Sidebar.css';

const Sidebar = () => {
  const location = useLocation();

  // Function to check if the current page is active
  const isActive = (path) => {
    return location.pathname === path || location.pathname.startsWith(path);
  };

  return (
    <div className="sidebar">
      <div className="profile-section">
        <img src="/images/icons/girl-1.png" alt="Jenny Lin" className="profile-pic" />
        <h4>Jenny Lin</h4>
      </div>
      <nav>
        <ul className="nav-links">
          <li>
            <Link
              to="/dashboard"
              className={`nav-button ${isActive('/dashboard') ? 'active' : ''}`}  // Will match both '/dashboard' and any sub-route like '/dashboard/courses'
            >
              <svg width="38" height="31" viewBox="0 0 38 31" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M18.7391 0.255596C18.5899 0.174193 18.4095 0.174194 18.2602 0.255597L0.513081 9.93587C0.16558 10.1254 0.165668 10.6244 0.513236 10.8138L6.28061 13.9571C6.44133 14.0447 6.54134 14.2131 6.54134 14.3961V24.0524C6.54134 24.2354 6.64125 24.4037 6.80183 24.4913L18.2602 30.7443C18.4094 30.8258 18.5899 30.8258 18.7392 30.7443L30.1975 24.4913C30.3581 24.4037 30.458 24.2354 30.458 24.0524V14.3961C30.458 14.2131 30.558 14.0447 30.7187 13.9571L33.1354 12.64C33.4686 12.4584 33.8747 12.6996 33.8747 13.079V23.5417C33.8747 23.8178 34.0985 24.0417 34.3747 24.0417H36.7913C37.0675 24.0417 37.2913 23.8178 37.2913 23.5417V10.6718C37.2913 10.4888 37.1914 10.3205 37.0308 10.2329L18.7391 0.255596ZM29.3458 9.93605C29.6932 10.1256 29.6932 10.6244 29.3458 10.8139L18.7391 16.5994C18.5899 16.6808 18.4095 16.6808 18.2602 16.5994L7.65358 10.8139C7.30615 10.6244 7.30615 10.1256 7.65358 9.93605L18.2602 4.1506C18.4095 4.06919 18.5899 4.06919 18.7391 4.1506L29.3458 9.93605ZM18.2601 26.8492C18.4094 26.9307 18.5899 26.9307 18.7393 26.8492L26.781 22.4584C26.9415 22.3708 27.0413 22.2025 27.0413 22.0196V16.8039C27.0413 16.4243 26.6349 16.1832 26.3017 16.3651L18.7393 20.4942C18.5899 20.5757 18.4094 20.5757 18.2601 20.4942L10.6976 16.3651C10.3644 16.1832 9.95801 16.4243 9.95801 16.8039V22.0196C9.95801 22.2025 10.0579 22.3708 10.2184 22.4584L18.2601 26.8492Z"/>
              </svg>

              My courses
            </Link>
          </li>
          <li>
            <Link
              to="/favorites"
              className={`nav-button ${isActive('/favorites') ? 'active' : ''}`}
            >
              <svg width="30" height="28" viewBox="0 0 30 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M19.0974 9.65306C19.1698 9.82345 19.3303 9.93994 19.5147 9.95585L28.8231 10.7585C29.2632 10.7965 29.4415 11.3447 29.1079 11.6343L22.0523 17.7577C21.9125 17.8791 21.8512 18.0678 21.893 18.2482L24.0029 27.3478C24.1027 27.7784 23.6358 28.1172 23.2574 27.8888L15.2584 23.0609C15.0995 22.965 14.9005 22.965 14.7416 23.0609L6.7445 27.8877C6.36584 28.1162 5.89873 27.7767 5.99921 27.346L8.12144 18.2489C8.1636 18.0682 8.10218 17.8789 7.9619 17.7574L0.895697 11.6359C0.561398 11.3463 0.740104 10.7972 1.18082 10.7598L10.4846 9.97049C10.6694 9.95481 10.8303 9.83814 10.9027 9.66739L14.54 1.08537C14.7122 0.678971 15.2881 0.678816 15.4606 1.08512L19.0974 9.65306ZM9.62977 22.3504C9.52912 22.7812 9.99635 23.1208 10.3751 22.8922L14.7414 20.2561C14.9004 20.1601 15.0996 20.1602 15.2585 20.2563L19.6393 22.9057C20.018 23.1348 20.4856 22.7951 20.3849 22.3641L19.2236 17.3938C19.1814 17.2131 19.2427 17.0239 19.3829 16.9023L23.243 13.5538C23.5767 13.2643 23.3986 12.7161 22.9586 12.6779L17.8649 12.236C17.6804 12.22 17.5199 12.1033 17.4477 11.9328L15.4612 7.23969C15.2889 6.83262 14.7119 6.83297 14.5401 7.24025L12.5672 11.9173C12.4951 12.0881 12.3344 12.205 12.1497 12.2211L7.0564 12.6629C6.61637 12.7011 6.43833 13.2493 6.77197 13.5388L10.6321 16.8873C10.7723 17.0089 10.8336 17.1981 10.7914 17.3788L9.62977 22.3504Z"/>
              </svg>
              Favorites
            </Link>
          </li>
          <li>
            <Link
              to="/preferences"
              className={`nav-button ${isActive('/preferences') ? 'active' : ''}`}
            >
              <svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.4167 8.75H17.5V0H20.4167V2.91667H26.25V5.83333H20.4167V8.75ZM0 5.83333V2.91667H14.5833V5.83333H0ZM0 23.3333V20.4167H8.75V23.3333H0ZM14.5833 26.25V23.3333H26.25V20.4167H14.5833V17.5H11.6667V26.25H14.5833ZM5.83333 11.6667V8.75H8.75V17.5H5.83333V14.5833H0V11.6667H5.83333ZM26.25 14.5833V11.6667H11.6667V14.5833H26.25Z"/>
              </svg>
              Preferences
            </Link>
          </li>
          <li>
            <Link
              to="/account"
              className={`nav-button ${isActive('/account') ? 'active' : ''}`}
            >
              <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M11.3333 0C8.2025 0 5.66667 2.53583 5.66667 5.66667C5.66667 8.7975 8.2025 11.3333 11.3333 11.3333C14.4642 11.3333 17 8.7975 17 5.66667C17 2.53583 14.4642 0 11.3333 0ZM14.3083 5.66667C14.3083 4.02333 12.9767 2.69167 11.3333 2.69167C9.69 2.69167 8.35833 4.02333 8.35833 5.66667C8.35833 7.31 9.69 8.64167 11.3333 8.64167C12.9767 8.64167 14.3083 7.31 14.3083 5.66667ZM19.975 18.4167C19.975 17.51 15.5408 15.4417 11.3333 15.4417C7.12583 15.4417 2.69167 17.51 2.69167 18.4167V19.975H19.975V18.4167ZM0 18.4167C0 14.6483 7.55083 12.75 11.3333 12.75C15.1158 12.75 22.6667 14.6483 22.6667 18.4167V22.6667H0V18.4167Z"/>
              </svg>
              My account
            </Link>
          </li>
          <li>
            <Link
              to="/settings"
              className={`nav-button ${isActive('/settings') ? 'active' : ''}`}
            >
              <svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M22.2546 12.9167C22.2546 13.3558 22.2158 13.7692 22.1641 14.1825L24.8896 16.3137C25.135 16.5075 25.1996 16.8563 25.0446 17.1404L22.4612 21.6096C22.345 21.8162 22.1254 21.9325 21.9058 21.9325C21.8283 21.9325 21.7508 21.9196 21.6733 21.8938L18.4571 20.6021C17.7854 21.1058 17.0621 21.545 16.2741 21.8679L15.7833 25.2908C15.7446 25.6008 15.4733 25.8333 15.1504 25.8333H9.98372C9.6608 25.8333 9.38955 25.6008 9.3508 25.2908L8.85997 21.8679C8.07205 21.545 7.34872 21.1187 6.67705 20.6021L3.4608 21.8938C3.39622 21.9196 3.31872 21.9325 3.24122 21.9325C3.00872 21.9325 2.78914 21.8162 2.67289 21.6096L0.0895533 17.1404C-0.0654467 16.8563 -0.000863339 16.5075 0.244553 16.3137L2.96997 14.1825C2.9183 13.7692 2.87955 13.3429 2.87955 12.9167C2.87955 12.4904 2.9183 12.0642 2.96997 11.6508L0.244553 9.51958C-0.000863339 9.32583 -0.0783633 8.97708 0.0895533 8.69292L2.67289 4.22375C2.78914 4.01708 3.00872 3.90083 3.2283 3.90083C3.3058 3.90083 3.3833 3.91375 3.4608 3.93958L6.67705 5.23125C7.34872 4.7275 8.07205 4.28833 8.85997 3.96542L9.3508 0.5425C9.38955 0.2325 9.6608 0 9.98372 0H15.1504C15.4733 0 15.7446 0.2325 15.7833 0.5425L16.2741 3.96542C17.0621 4.28833 17.7854 4.71458 18.4571 5.23125L21.6733 3.93958C21.7379 3.91375 21.8154 3.90083 21.8929 3.90083C22.1254 3.90083 22.345 4.01708 22.4612 4.22375L25.0446 8.69292C25.1996 8.97708 25.135 9.32583 24.8896 9.51958L22.1641 11.6508C22.2158 12.0642 22.2546 12.4775 22.2546 12.9167ZM19.6712 12.9167C19.6712 12.6454 19.6583 12.3742 19.6066 11.9738L19.4258 10.5142L20.5754 9.61L21.9575 8.51208L21.0533 6.94917L19.4129 7.60792L18.0437 8.16333L16.8683 7.25917C16.3516 6.87167 15.835 6.57458 15.2796 6.34208L13.9104 5.78667L13.7037 4.32708L13.4583 2.58333H11.6629L11.4046 4.32708L11.1979 5.78667L9.82872 6.34208C9.29914 6.56167 8.76955 6.87167 8.21414 7.285L7.05164 8.16333L5.7083 7.62083L4.06789 6.96208L3.16372 8.525L4.55872 9.61L5.7083 10.5142L5.52747 11.9738C5.48872 12.3613 5.46289 12.6583 5.46289 12.9167C5.46289 13.175 5.48872 13.4721 5.52747 13.8725L5.7083 15.3321L4.55872 16.2362L3.16372 17.3213L4.06789 18.8842L5.7083 18.2254L7.07747 17.67L8.25289 18.5742C8.76955 18.9617 9.28622 19.2588 9.84164 19.4913L11.2108 20.0467L11.4175 21.5063L11.6629 23.25H13.4712L13.7296 21.5063L13.9362 20.0467L15.3054 19.4913C15.835 19.2717 16.3646 18.9617 16.92 18.5483L18.0825 17.67L19.4258 18.2125L21.0662 18.8713L21.9704 17.3083L20.5754 16.2233L19.4258 15.3192L19.6066 13.8596C19.6454 13.4721 19.6712 13.1879 19.6712 12.9167ZM12.5671 7.75C9.71247 7.75 7.40039 10.0621 7.40039 12.9167C7.40039 15.7712 9.71247 18.0833 12.5671 18.0833C15.4216 18.0833 17.7337 15.7712 17.7337 12.9167C17.7337 10.0621 15.4216 7.75 12.5671 7.75ZM9.98372 12.9167C9.98372 14.3375 11.1462 15.5 12.5671 15.5C13.9879 15.5 15.1504 14.3375 15.1504 12.9167C15.1504 11.4958 13.9879 10.3333 12.5671 10.3333C11.1462 10.3333 9.98372 11.4958 9.98372 12.9167Z"/>
              </svg>
              Settings
            </Link>
          </li>
        </ul>
      </nav>
      <button className="nav-button sign-out">
        <svg width="24" height="28" viewBox="0 0 24 28" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14.5 2H2V26H14.5" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M8 14H22.5M22.5 14L16.5 8M22.5 14L16.5 20" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>

        Sign out
      </button>
    </div>
  );
};

export default Sidebar;
